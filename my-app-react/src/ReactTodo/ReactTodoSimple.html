<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <div id="example"></div>
    <script  type="text/javascript" src="../reactJs/react.development.js" ></script>
    <script  type="text/javascript" src="../reactJs/react-dom.development.js" ></script>
    <script  type="text/javascript" src="../reactJs/babel.min.js"></script>
    <script  type="text/javascript" src="../reactJs/prop-types.js"></script>

    <script type="text/babel">

        class App extends React.Component{

            constructor(prop){
                super(prop);
                this.state={
                   todos:["吃饭","睡觉","敲代码"]
                }
                this.addTodoItem = this.addTodoItem.bind(this)
            }

            addTodoItem(item){
                const {todos} = this.state
                todos.unshift(item)
                this.setState({todos},()=> {
                    console.log("setState");
                })

            }

            render(){
                return (
                    <div>
                          <h1>Simple Todo List</h1>
                          <Add count={this.state.todos.length+1} addTodoItem={this.addTodoItem}></Add>
                          <ToList todoList={this.state.todos}></ToList>
                    </div>
                )
            }
        }

        class Add extends React.Component{
            constructor(prop){
                super(prop)

                this.handleClick = this.handleClick.bind(this)
            }
            handleClick(){
                let inputValue = this.inputTodo.value
                if (!inputValue){
                    return
                }
                this.props.addTodoItem(inputValue)
                this.inputTodo.value = ''
            }

            render(){
                return (
                    <div>
                        <input ref={input => this.inputTodo = input}/>&nbsp;
                        <button onClick={this.handleClick}>add  #{this.props.count}</button>
                    </div>
                )
            }
        }

        class ToList extends  React.Component{
            render(){
                return(
                    <div>
                        <ul>
                            {this.props.todoList.map((item,index)=> <li key={index}>{item}</li>)}
                        </ul>
                    </div>
                )
            }
        }

        /**
         * 接收父组件传过来的值
         * @type {{todoList: (shim|*)}}
         */
        ToList.propTypes={
            todoList :PropTypes.array.isRequired
        }

        Add.propTypes={
            count : PropTypes.number.isRequired,
            addTodoItem : PropTypes.func.isRequired
        }

        ReactDOM.render(<App/>,document.getElementById("example"))

    </script>
</body>
</html>